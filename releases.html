<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>更新日志 | Sakurairo 主题周边网站</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="https://cdn.maho.cc/vision/website/ico20210729-llq.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/img/novel.png">
    <link rel="mask-icon" href="https://cdn.maho.cc/vision/website/ico20210729-llq.png" color="#5596ff">
    <meta name="description" content="主题版本更新 漂流 Hyouryu 现已发布">
    <meta name="theme-color" content="#5596ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="https://cdn.maho.cc/vision/website/ico20210729-llq.png">
    <meta name="msapplication-TileColor" content="#5596ff">
    
    <link rel="preload" href="/assets/css/0.styles.48266c77.css" as="style"><link rel="preload" href="/assets/js/app.52af8720.js" as="script"><link rel="preload" href="/assets/js/3.2c602196.js" as="script"><link rel="preload" href="/assets/js/20.f4287034.js" as="script"><link rel="preload" href="/assets/js/6.52c8b565.js" as="script"><link rel="prefetch" href="/assets/js/10.f6595224.js"><link rel="prefetch" href="/assets/js/11.377eaa22.js"><link rel="prefetch" href="/assets/js/12.bfd8a35e.js"><link rel="prefetch" href="/assets/js/13.58594347.js"><link rel="prefetch" href="/assets/js/14.e4fee180.js"><link rel="prefetch" href="/assets/js/15.d584ff9b.js"><link rel="prefetch" href="/assets/js/16.22c17af5.js"><link rel="prefetch" href="/assets/js/17.b5c5f152.js"><link rel="prefetch" href="/assets/js/18.c1706b00.js"><link rel="prefetch" href="/assets/js/19.67f073a6.js"><link rel="prefetch" href="/assets/js/21.a8b15113.js"><link rel="prefetch" href="/assets/js/22.ed46af67.js"><link rel="prefetch" href="/assets/js/4.2939a555.js"><link rel="prefetch" href="/assets/js/5.2590636f.js"><link rel="prefetch" href="/assets/js/7.4f3910d8.js"><link rel="prefetch" href="/assets/js/8.bac3baf7.js"><link rel="prefetch" href="/assets/js/9.47377419.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.cda19412.js">
    <link rel="stylesheet" href="/assets/css/0.styles.48266c77.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.maho.cc/vision/website/ico20210729.png" alt="Sakurairo 主题周边网站" class="logo"> <span class="site-name can-hide">Sakurairo 主题周边网站</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  开始使用
</a></div><div class="nav-item"><a href="/demo.html" class="nav-link">
  使用博客
</a></div><div class="nav-item"><a href="/releases.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  更新日志
</a></div><div class="nav-item"><a href="/sponsors.html" class="nav-link">
  支持我们
</a></div> <a href="https://github.com/mirai-mamori/Sakurairo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  开始使用
</a></div><div class="nav-item"><a href="/demo.html" class="nav-link">
  使用博客
</a></div><div class="nav-item"><a href="/releases.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  更新日志
</a></div><div class="nav-item"><a href="/sponsors.html" class="nav-link">
  支持我们
</a></div> <a href="https://github.com/mirai-mamori/Sakurairo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/guide/" class="sidebar-link">安装</a></li><li><a href="/guide/about.html" class="sidebar-link">配置</a></li><li><a href="/guide/feedback.html" class="sidebar-link">反馈</a></li><li><a href="/releases.html" aria-current="page" class="active sidebar-link">更新日志</a><ul class="sidebar-sub-headers"></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="更新日志"><a href="#更新日志" class="header-anchor">#</a> 更新日志</h1> <h3 id="ver-2-2-0-1"><a href="#ver-2-2-0-1" class="header-anchor">#</a> Ver 2.2.0.1</h3> <h4 id="新特性"><a href="#新特性" class="header-anchor">#</a> 新特性</h4> <ul><li>接入Cravatar头像服务</li></ul> <h5 id="优化设置选项"><a href="#优化设置选项" class="header-anchor">#</a> 优化设置选项</h5> <ul><li>Gravatar 服务代理</li></ul> <h4 id="修复"><a href="#修复" class="header-anchor">#</a> 修复</h4> <ul><li>公告板背景功能失效</li> <li>翻译中的错误</li></ul> <h3 id="ver-2-2-0"><a href="#ver-2-2-0" class="header-anchor">#</a> Ver 2.2.0</h3> <h4 id="新特性-2"><a href="#新特性-2" class="header-anchor">#</a> 新特性</h4> <h5 id="多语言支持"><a href="#多语言支持" class="header-anchor">#</a> 多语言支持</h5> <ul><li>评论区IP地址地理库API源切换</li> <li>文章列表图模糊出现动画</li> <li>文章卡片hover阴影效果</li> <li>web_audio: 可定制乐谱、主音量调节</li> <li>移动端侧边栏的一系列变更</li> <li>hitokoto: 可换api路径；自动尝试其他api</li> <li>拆分非主页需要的脚本逻辑</li> <li>调整ready()对readyState的检查，确保在DOMContentLoaded阶段执行传入的函数</li> <li>监听窗口大小变化调整toc高度</li> <li>懒加载jQuery前检查是否已经加载</li> <li>about_us</li> <li>event &quot;ajax_comment_complete&quot;</li> <li>sakurairo_global</li> <li>封面图片处理: manifest程序重构(多线程支持,合并程序,自动分离两端图片[图片宽高判断])</li> <li>封面图片处理: 修改manifest README 移除qt.py</li></ul> <h6 id="新增设置选项"><a href="#新增设置选项" class="header-anchor">#</a> 新增设置选项</h6> <ul><li>一言API地址</li> <li>为页尾追加HTML代码</li></ul> <h4 id="修复-2"><a href="#修复-2" class="header-anchor">#</a> 修复</h4> <ul><li>优雅处理淘宝ip API 源查询错误</li> <li>验证码有时只会生成4个字符</li> <li>i18n: 前端国际化初步支持_sakurairoi18n</li> <li>web_audio: 控制选项失效</li> <li>关闭封面背景一体化 从非主页进入 Pjax加载主页后 轮播图不加载</li> <li>pjax加载进入，滚动页面后，TOC消失</li> <li>coverBackground: 捕获缓存保存阶段的错误</li> <li>coverBackground: 缓存类型更换为ArrayBuffer</li> <li>hitokoto: 忘记+break了</li> <li>hitokoto: from_who为&quot;null&quot;时将不显示</li> <li>.toc not found</li> <li>进入非主页时不执行lazyload()与powermod()</li> <li>开启mashiro_option.site_bg_as_cover且关闭'封面'时报错</li> <li>在非主页落地时不加载一言</li> <li>bgImgSetting未设置时，背景图可能为空</li> <li>entry&quot;page&quot; whilePjaxComplete()执行次序调整</li> <li>lazyload 过早进行导致兼容性问题</li> <li>lazyload()在pjax重载中顺序过前</li> <li>min undefined</li> <li>pjax加载错误提示文本错误</li> <li>pjax进入评论页面时，ajax评论不生效</li> <li>设置项code_highlight_prism_theme_light为空时，mashiro_option可能无法正确输出</li> <li>使用古腾堡编辑器并打开图片懒加载时，图片不会显示懒加载动画</li> <li>追番模板&amp;&amp;php8下的小问题</li> <li><ul><li>在php8下会在登陆模板可能出现的错误</li></ul></li> <li>验证码错误地默认打开</li></ul> <h4 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h4> <ul><li>函数初始化移至顶层</li></ul> <h4 id="开发特性与其他变更"><a href="#开发特性与其他变更" class="header-anchor">#</a> 开发特性与其他变更</h4> <ul><li>add css variable --theme-skin-dark</li> <li>在伟大的ie11的指导下删除了未闭合的HTML标签</li> <li>删除未使用的site-name</li> <li>完全去除js_lib</li> <li>未使用的选项windowheight</li></ul> <h3 id="ver-2-1-1-1"><a href="#ver-2-1-1-1" class="header-anchor">#</a> Ver 2.1.1.1</h3> <p>此次更新为修正更新，解决了一些Bug。</p> <h3 id="ver-2-1-1"><a href="#ver-2-1-1" class="header-anchor">#</a> Ver 2.1.1</h3> <p>六一儿童节快乐~
此次更新为功能更新，同时也带来了已知Bug的修正。</p> <h4 id="重大更改"><a href="#重大更改" class="header-anchor">#</a> 重大更改</h4> <p>前台背景显示样式更改，详细参见 c8774a4</p> <h5 id="新特性-3"><a href="#新特性-3" class="header-anchor">#</a> 新特性</h5> <ul><li>封面图片本地缓存</li> <li>封面与前台背景一体化</li> <li>切换背景时若路径相同则不实行切换</li> <li>懒加载pjax、NProgress、POWERMODE</li> <li>pjax加载错误时提示</li> <li>评论提交现在有防重复点击的限制</li> <li>现在重新提供一言</li> <li>样式菜单背景模糊效果</li> <li>pjax现在会刷新mashiro_option</li> <li>深色模式现在会影响滚动条颜色</li></ul> <h5 id="新设置项"><a href="#新设置项" class="header-anchor">#</a> 新设置项</h5> <ul><li>封面图片本地缓存</li> <li>封面与前台背景一体化</li> <li>一言</li> <li>前台背景缩放方法</li> <li>深色模式页面背景透明度调整</li></ul> <h4 id="问题修复"><a href="#问题修复" class="header-anchor">#</a> 问题修复</h4> <h5 id="字体切换-216"><a href="#字体切换-216" class="header-anchor">#</a> 字体切换 #216</h5> <ul><li>样式菜单为“简单”时，默认使用A字体</li> <li>字体切换按钮没有正确表示当前的状态</li></ul> <h5 id="其他问题"><a href="#其他问题" class="header-anchor">#</a> 其他问题</h5> <ul><li>样式菜单为简洁时，addEventListener出错</li> <li>开启mashiro_option.cache_cover并成功缓存时，切换背景不生效</li> <li>部分浏览器上AJAX评论不生效</li> <li>(butterbar) 重新支持html消息</li> <li>pjax加载后，导航栏不随滚动变化</li> <li>早期Safari支持</li> <li>不支持部分动画帧的浏览器开启预加载模糊动画时，预加载动画不会消失</li> <li>history.state undefined</li> <li>开启前台背景做为封面时，切换到其他自定义背景刷新后没有正确切换到对应背景</li> <li>load_post()重复加载</li> <li>toc-container高度过长导致页尾溢出</li> <li>ajax分页加载在页面变化后仍然更改DOM</li> <li>错误加载Clipboard.JS</li> <li>pjax不刷新mashiro_option</li> <li>skin_bg0不显示</li> <li>ap not defined</li> <li>老浏览器若滚动过页面，刷新后，预加载动画不会出现在屏幕中</li> <li>博客的最后一篇文章某些情况下会报HTTP 500无法进入；博客第一篇或最新一篇文章上下文显示有时会有问题 #217 62677b0</li> <li>pjax打开时，移动端导航栏可能不会跟随页面滚动变化
移动端: 点击logo 无法返回主页面 #210</li></ul> <h4 id="移除"><a href="#移除" class="header-anchor">#</a> 移除</h4> <ul><li>全局变量mashiro_global.font_control</li> <li>hermitInit() reloadHermit() 暂时去除了这两个函数，正在使用Hermit播放器的朋友可以反馈一下影响</li> <li>全局变量addComment</li> <li>删除.serif移动端判断 537510e</li></ul> <h4 id="性能提升"><a href="#性能提升" class="header-anchor">#</a> 性能提升</h4> <ul><li>提高load_post()（ajax分页加载）效率</li></ul> <h4 id="构建系统"><a href="#构建系统" class="header-anchor">#</a> 构建系统</h4> <ul><li>生成Brotli算法压缩版本</li></ul> <h3 id="ver-2-1-0-2"><a href="#ver-2-1-0-2" class="header-anchor">#</a> Ver 2.1.0.2</h3> <p>此次更新为修正更新</p> <h4 id="修正"><a href="#修正" class="header-anchor">#</a> 修正</h4> <ul><li>preload_blur未定义时引发mashiro_option初始化失败</li> <li>移动端点击右上角图标无法返回主页</li> <li>移动端纪念模式菜单失效(#212)</li> <li>搜索结果页 推荐结果深色模式下字体颜色不正确</li> <li>导航菜单白猫样式Logo与图片logo的互相替换</li> <li>移动端无法点击headertop_down (#210)</li> <li>移动端回复头像错位问题 (#168)</li> <li>PHP8兼容性</li></ul> <h4 id="优化"><a href="#优化" class="header-anchor">#</a> 优化</h4> <ul><li>移动端菜单栏居中(#209)</li></ul> <h3 id="ver-2-1-0-1"><a href="#ver-2-1-0-1" class="header-anchor">#</a> Ver 2.1.0.1</h3> <p>此次更新为修正更新
同时，此次更新也带来了纪念模式，借此缅怀伟人</p> <h4 id="功能"><a href="#功能" class="header-anchor">#</a> 功能</h4> <ul><li>纪念模式</li> <li>修正</li> <li>特定的固定链接配置下，API路由返回404(#200)</li> <li>AJAX分页按钮翻译缺失</li> <li>评论区获取不到QQ信息</li> <li>实时搜索 &quot;json undefined&quot;</li> <li>短代码收缩/展开失效</li> <li>Pjax打开时，分页失效 (#201)</li> <li>代码高亮为highlight.js时，缩进不正常 (#197)</li></ul> <h4 id="优化-2"><a href="#优化-2" class="header-anchor">#</a> 优化</h4> <ul><li>移动端菜单栏</li> <li>设置说明</li> <li>登录页登录窗口验证码未开启时位置调整</li> <li>评论区“上传图片”入口可关闭 (#193)</li> <li>JavaScript脚本的ES版本现在调整为ES2015（原本是ESNext）</li> <li>部分原本使用cookie保存的前端设置项现在移动到localStorage，减少与服务器通信的带宽消耗</li></ul> <h3 id="ver-2-1-0"><a href="#ver-2-1-0" class="header-anchor">#</a> Ver 2.1.0</h3> <p>全新的无 Jquery 主题体验
全新的Webpack化主题体验
微定制设置框架，降低设置搜索阈值，优化性能。
全新的独立相册模版（体验版）
增强的代码高亮功能
增强的深色模式体验</p> <h4 id="新增"><a href="#新增" class="header-anchor">#</a> 新增</h4> <ul><li>文章页面自动添加菜单功能</li> <li>文章区域多作者信息</li> <li>导航菜单毛玻璃效果</li> <li>公开测试频道</li> <li>前台音乐播放器相关功能</li> <li>验证码验证（替代滑动验证）</li></ul> <h4 id="优化-3"><a href="#优化-3" class="header-anchor">#</a> 优化</h4> <ul><li>全局界面动画</li> <li>PHP8的兼容性</li> <li>古腾堡相关CSS</li> <li>主题文件结构</li> <li>部分CSS引入全局变量</li> <li>默认设置值及相关说明</li></ul> <h4 id="修正-2"><a href="#修正-2" class="header-anchor">#</a> 修正</h4> <ul><li>issue模版中的文本错误</li> <li>导航菜单登录菜单♻️过快的特性</li> <li>文章没有Large尺寸的缩略图时的报错情况</li> <li>评论头像概率炸图的问题</li> <li>手机端导航菜单的一些bug</li></ul> <p>Update README.md</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Fuukei/Wiki_iro/edit/docs/docs/releases.md" target="_blank" rel="noopener noreferrer">帮助改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/feedback.html" class="prev">
        反馈
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.52af8720.js" defer></script><script src="/assets/js/3.2c602196.js" defer></script><script src="/assets/js/20.f4287034.js" defer></script><script src="/assets/js/6.52c8b565.js" defer></script>
  </body>
</html>
